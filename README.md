# Blogging Platform API

Welcome to the Blogging Platform API! This repository contains the backend code for a dynamic blogging platform built using Node.js, Express, and MongoDB. The API provides endpoints for managing blog posts, comments, and user interactions.


## Some key highlights include:
- Enhanced API responses with a custom response middleware for consistent formatting and error handling.
- Streamlined validation by creating a centralized validation middleware for reuse across routes.
- Implemented a centralized error handling middleware to catch and format exceptions and errors.
- Integrated user authentication and authorization using JSON Web Tokens (JWT) for secure endpoints.
- Managed fine-grained access to different resources and actions based on user roles using the ACL package.
- Developed a custom middleware to handle requests to non-existent routes (404).
- Created an organized and maintainable codebase following industry best practices.

## Table of Contents

- [Installation](#installation)
- [Security Measures and Token-based Authentication](#security-measures-and-token-based-authentication)
- [Services and Middlewares](#services-and-middlewares)
- [API Endpoints](#api-endpoints)
- [Request and Response Formats](#request-and-response-formats)
- [Acknowledgments](#acknowledgments)
- [Future Plans](#future-plans)
- [License](#license)

## Installation

1. Clone this repository.
2. Navigate to the project directory: `cd blogging-platform-api`.
3. Install dependencies: `npm install`.
4. Set up environment variables in a `.env` file (see `.env.example`).
5. Start the server: `npm start`.

## Security Measures and Token-based Authentication

Ensuring the security of API is paramount. To provide secure access to different endpoints, i've implemented a token-based authentication system. Here's an overview of the security measures in place:

- **User Authentication and Authorization:** All API paths require a valid token in the request header to access, ensuring that only authorized users can interact with the endpoints by authorized front-end app.

- **Token Format:** Tokens are provided as JWTs (JSON Web Tokens) in the request header. These tokens contain encoded user IDs and role IDs, allowing us to determine user privileges and access rights.

- **User-specific Tokens:** Upon successful login or signup, users receive a unique token in the response header. This token is valid for 1 hour, after which users need to obtain a new token by logging in again.

- **Anonymous User Token:** For grantless APIs, an anonymous user token is required. These tokens allow access to specific endpoints even without logging in. Anonymous tokens are also valid for 1 hour and are generated using the admin token.

- **Admin Token for Generating Anonymous Tokens:** An admin token is used to generate anonymous and other user tokens. This admin token is utilized by authorized front-end applications to create anonymous tokens for access to specific APIs.

This multi-layered approach to authentication and token management enhances the security of APIs, prevents unauthorized access, and provides a safe environment for users to interact with platform.

It is recommend securely storing and managing tokens in your front-end application to ensure that authorized access is maintained and secure communication with the API is established.

## Services and Middlewares

1. Validation Middleware: Validates request bodies and query parameters using Joi.
2. Response Middleware: Formats API responses with consistent structure and error handling.
3. Auth Middleware: Implements user authentication using JSON Web Tokens (JWT).
4. Error Handling Middleware: Centralized error handling and response formatting.
5. Custom Validation Middleware: Reusable middleware for common validation scenarios.

## API Endpoints

### Blog Posts

- `GET /api/posts`: Get all blog posts.
- `GET /api/posts/:postId`: Get a specific blog post.
- `POST /api/posts`: Create a new blog post.
- `PUT /api/posts/:postId`: Update a blog post.
- `DELETE /api/posts/:postId`: Delete a blog post.

### Comments

- `GET /api/comments/content/:contentId`: Get comments for a specific content.
- `GET /api/comments/:commentId/replies`: Get replies for a specific comment.
- `GET /api/comments/:commentId`: Get details of a comment.
- `POST /api/comments`: Create a new comment.
- `POST /api/comments/:commentId/reply`: Reply to a comment.
- `PUT /api/comments/:commentId`: Update a comment.
- `DELETE /api/comments/:commentId`: Delete a comment.

### Users

- `POST /api/users/register`: Register a new user.
- `POST /api/users/login`: Log in a user and obtain JWT token.
- `GET /api/users/profile`: Get user profile (requires authentication).
  
### Tokens

- `POST /api/token/generate/:role`:  Generate a token for a specific user role.
- `Admin Token Generation`: To maintain the highest level of security, admin tokens should only be generated by authorized personnel with direct access to the server environment.

## Request and Response Formats

- Request bodies should adhere to the schema defined for each API endpoint.
- Responses are formatted with a consistent structure: `{ success, data, message }`.

  ## Acknowledgments

I would like to express my gratitude to the following libraries and resources that have greatly contributed to the development of the Blogging Platform API:

- [Express.js](https://expressjs.com/): A fast and minimalist web framework for Node.js that formed the foundation of our API.
- [Mongoose](https://mongoosejs.com/): An elegant MongoDB object modeling for Node.js that simplified database operations.
- [Joi](https://joi.dev/): A powerful schema description language and data validator for JavaScript that ensured data integrity.
- [ACL](https://github.com/OptimalBits/node_acl): Access Control Lists (ACL) package that enabled us to manage fine-grained access control for users.
- [jsonwebtoken](https://www.npmjs.com/package/jsonwebtoken): A library to create and verify JSON Web Tokens (JWT) for user authentication.
- [dotenv](https://www.npmjs.com/package/dotenv): A zero-dependency module that loads environment variables from a `.env` file into `process.env`.

I as a developer appreciate the open-source community's effort in creating and maintaining these tools, which have significantly contributed to the success of this project.

## Future Plans

Here are some of my planned enhancements:

- **Admin Dashboard API:** Introduce a comprehensive dashboard API where administrators and other privileged roles can log in and perform essential actions, such as publishing granted posts, user management, content moderation, and more.
- **UI Enhancements:** Work on creating a user-friendly and intuitive interface for interacting with the API.

We're excited about the journey ahead and look forward to implementing these enhancements to make the Blogging Platform API an even more powerful and versatile solution.


## License


